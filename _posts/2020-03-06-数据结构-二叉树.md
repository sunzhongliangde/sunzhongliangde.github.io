---
layout:     post
title:      æ•°æ®ç»“æ„-äºŒå‰æ ‘
subtitle:   
date:       2020-03-06
author:     sunzhongliang
header-img: img/post-bg-github-cup.jpg
catalog: true
tags:
    - æ•°æ®ç»“æ„
---


> `æ•°æ®ç»“æ„`æ˜¯è®¡ç®—æœºå­˜å‚¨ã€ç»„ç»‡æ•°æ®çš„æ–¹å¼<br>
> æœ¬æ–‡æ¼”ç¤ºä»£ç ä¸º`Swift`è¯­è¨€

## æ ‘(Tree)

<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305072045WX20200305-152020@2x.png" referrerpolicy="no-referrer">
`æ ‘`åˆåˆ†ä¸ºä»¥ä¸‹å‡ ç§ï¼š

- æœ‰åºæ ‘
    - æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¹‹é—´æœ‰é¡ºåºå…³ç³»
- æ— åºæ ‘
    - æ ‘ä¸­ä»»æ„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¹‹é—´æ²¡æœ‰é¡ºåºå…³ç³»ï¼ˆä¹Ÿå«åš`è‡ªç”±æ ‘`ï¼‰
- æ£®æ—
    - ç”±m(m >= 0)æ£µäº’ä¸ç›¸äº¤çš„æ•°ç»„æˆçš„é›†åˆ

#### äºŒå‰æ ‘(Binary Tree)
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305075450WX20200305-155433@2x.png" referrerpolicy="no-referrer">

##### çœŸäºŒå‰æ ‘(Proper Binary Tree)
`çœŸäºŒå‰æ ‘`ï¼šæ‰€æœ‰èŠ‚ç‚¹çš„`åº¦`è¦ä¹ˆä¸º0ï¼Œè¦ä¹ˆä¸º2

##### æ»¡äºŒå‰æ ‘(Full Binary Tree)
`æ»¡äºŒå‰æ ‘`ï¼šæ‰€æœ‰èŠ‚ç‚¹çš„`åº¦`è¦ä¹ˆä¸º0ï¼Œè¦ä¹ˆä¸º2ï¼Œä¸”æ‰€æœ‰çš„`å¶å­èŠ‚ç‚¹`éƒ½åœ¨æœ€åä¸€å±‚<br>

> åœ¨åŒæ ·é«˜åº¦çš„äºŒå‰æ ‘ä¸­ï¼Œæ»¡äºŒå‰æ ‘çš„å¶å­èŠ‚ç‚¹æ•°é‡æœ€å¤šï¼Œæ€»ç»“ç‚¹æ•°é‡æœ€å¤š<br>
> æ»¡äºŒå‰æ ‘ä¸€å®šæ˜¯çœŸäºŒå‰æ ‘ï¼ŒçœŸäºŒå‰æ ‘ä¸ä¸€å®šæ˜¯æ»¡äºŒå‰æ ‘

##### å®Œå…¨äºŒå‰æ ‘(Complete Binary Tree)
`å®Œå…¨äºŒå‰æ ‘`ï¼šè‹¥è®¾äºŒå‰æ ‘çš„æ·±åº¦ä¸ºhï¼Œé™¤ç¬¬ h å±‚å¤–ï¼Œå…¶å®ƒå„å±‚ (1ï½h-1) çš„ç»“ç‚¹æ•°éƒ½è¾¾åˆ°æœ€å¤§ä¸ªæ•°(å³1~h-1å±‚ä¸ºä¸€ä¸ªæ»¡äºŒå‰æ ‘)ï¼Œç¬¬ h å±‚æ‰€æœ‰çš„ç»“ç‚¹éƒ½è¿ç»­é›†ä¸­åœ¨æœ€å·¦è¾¹ï¼Œè¿™å°±æ˜¯å®Œå…¨äºŒå‰æ ‘ã€‚<br>
å…¶å®æ˜¯ï¼š`å¶å­èŠ‚ç‚¹`åªä¼šå‡ºç°çš„`æœ€åä¸¤å±‚`ï¼Œä¸”`æœ€åä¸€å±‚`çš„`å¶å­èŠ‚ç‚¹`éƒ½`é å·¦`å¯¹é½

> `å®Œå…¨äºŒå‰æ ‘`ä»`æ ¹èŠ‚ç‚¹`è‡³`å€’æ•°ç¬¬äºŒå±‚`æ˜¯ä¸€æ£µ`æ»¡äºŒå‰æ ‘`<br>
> æ»¡äºŒå‰æ ‘ä¸€å®šæ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ï¼Œå®Œå…¨äºŒå‰æ ‘ä¸ä¸€å®šæ˜¯æ»¡äºŒå‰æ ‘


## äºŒå‰æœç´¢æ ‘(Binary Search Tree)
`äºŒå‰æœç´¢æ ‘`æ˜¯äºŒå‰æ ‘çš„ä¸€ç§ï¼Œæ˜¯åº”ç”¨éå¸¸å¹¿æ³›çš„ä¸€ç§äºŒå‰æ ‘ï¼Œè‹±æ–‡ç®€ç§°`BST`ï¼Œå®ƒåˆè¢«ç§°ä¸º`äºŒå‰æŸ¥æ‰¾æ ‘`ã€`äºŒå‰æ’åºæ ‘`ï¼Œå…¶æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š<br>
1.ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½`å¤§äº`å…¶`å·¦`å­æ ‘æ‰€æœ‰èŠ‚ç‚¹çš„å€¼<br>
2.ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½`å°äº`å…¶`å³`å­æ ‘æ‰€æœ‰çš„å€¼<br>
3.å®ƒçš„å·¦å³å­æ ‘ä¹Ÿæ˜¯ä¸€æ£µäºŒå‰æœç´¢æ ‘<br>

*æ€»ç»“æ¥è¯´å°±æ˜¯*ï¼šè‹¥å®ƒçš„`å·¦å­æ ‘`ä¸ç©ºï¼Œåˆ™`å·¦å­æ ‘`ä¸Š`æ‰€æœ‰ç»“ç‚¹`çš„å€¼å‡`å°äº`å®ƒçš„`æ ¹ç»“ç‚¹çš„å€¼`ï¼› è‹¥å®ƒçš„`å³å­æ ‘`ä¸ç©ºï¼Œåˆ™`å³å­æ ‘`ä¸Š`æ‰€æœ‰ç»“ç‚¹`çš„å€¼å‡`å¤§äº`å®ƒçš„`æ ¹ç»“ç‚¹çš„å€¼`ï¼› å®ƒçš„å·¦ã€å³å­æ ‘ä¹Ÿåˆ†åˆ«ä¸ºäºŒå‰æ’åºæ ‘ã€‚<br>

> `äºŒå‰æœç´¢æ ‘`å­˜å‚¨çš„å…ƒç´ å¿…é¡»å…·å¤‡å¯æ¯”è¾ƒæ€§ï¼Œæ¯”å¦‚intã€doubleç­‰ï¼Œä½†å¦‚æœæ˜¯`è‡ªå®šä¹‰ç±»å‹`ï¼Œéœ€è¦`æŒ‡å®šæ¯”è¾ƒæ–¹å¼`<br>
> æ¯”å¦‚`swift`å½“ä¸­è‡ªå®šä¹‰ç±»å‹å°±éœ€è¦å®ç°`Equatable`åè®®<br>
> ä¸å…è®¸å­˜å‚¨`null`å€¼

æ€è€ƒä¸‹é¢ä¸€é“ç»ƒä¹ é¢˜
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305093935WX20200305-173924@2x.png" referrerpolicy="no-referrer">

æ¯”å¦‚å‘äºŒå‰æœç´¢æ ‘ä¸­æ·»åŠ èŠ‚ç‚¹12ï¼Œç¨‹åºå½“ä¸­åº”è¯¥è¿™æ ·å®ç°ï¼š
- ç”¨å˜é‡nodeæŒ‡å‘äºŒå‰æœç´¢æ ‘çš„`parent`
- å£°æ˜å˜é‡tmpParentç”¨äºä¿å­˜å½“å‰å¾ªç¯åˆ°å“ªæ£µæ ‘ä¸Š
- `whileå¾ªç¯`(node!=null)éå†æ•´ä¸ªäºŒå‰æ ‘
    - å°†å½“å‰æ­£åœ¨éå†çš„èŠ‚ç‚¹èµ‹å€¼ç»™tmpParent
    - å¦‚æœè¦æ·»åŠ çš„èŠ‚ç‚¹å€¼`å¤§äº`å½“å‰éå†çš„èŠ‚ç‚¹å€¼
        - node = node.right(è¯´æ˜éå†åˆ°è¿™ä¸ªèŠ‚ç‚¹äº†ï¼Œèµ‹å€¼ç»™nodeäº†ï¼Œç»§ç»­éå†)
    - å¦‚æœè¦æ·»åŠ çš„èŠ‚ç‚¹å€¼`å°äº`å½“å‰éå†çš„èŠ‚ç‚¹å€¼
        - node = node.left(è¯´æ˜éå†åˆ°è¿™ä¸ªèŠ‚ç‚¹äº†ï¼Œèµ‹å€¼ç»™nodeäº†ï¼Œç»§ç»­éå†)
    - å¦åˆ™(ç›¸ç­‰æƒ…å†µ)
        - return
- åˆ›å»ºæ–°èŠ‚ç‚¹newNode(element=è¦æ·»åŠ çš„èŠ‚ç‚¹å€¼, parent=ä¸Šé¢whileå¾ªç¯è·å–çš„tmpParent)
- å¦‚æœèŠ‚ç‚¹å€¼`å¤§äº`tmpParentçš„èŠ‚ç‚¹å€¼
    - å¾€tmpParentçš„å³èŠ‚ç‚¹æ·»åŠ åˆ›å»ºçš„èŠ‚ç‚¹
- å¦‚æœèŠ‚ç‚¹å€¼`å°äº`tmpParentçš„èŠ‚ç‚¹å€¼
    - å¾€tmpParentçš„å·¦èŠ‚ç‚¹æ·»åŠ åˆ›å»ºçš„èŠ‚ç‚¹

ä»¥ä¸Šçš„ä»£ç é€»è¾‘ï¼Œå°±èƒ½æ»¡è¶³äºŒå‰æ ‘çš„æ·»åŠ æ“ä½œäº†

#### äºŒå‰æœç´¢æ ‘æ¥å£è®¾è®¡
```swift
// å…ƒç´ çš„æ•°é‡
int size();
// æ˜¯å¦ä¸ºç©º
Bool isEmpty();
// æ¸…ç©ºæ‰€æœ‰å…ƒç´ 
void clear();
// æ·»åŠ å…ƒç´ 
void add(T element)
// åˆ é™¤å…ƒç´ 
void remove(T element)
// æ˜¯å¦åŒ…å«æŸå…ƒç´ 
Bool contains(T element)
```

#### äºŒå‰æœç´¢æ ‘å®ç°
```swift
// æœ¬æ–‡ç¤ºä¾‹ä¸ºäº†ç®€å•ï¼Œä»¥Intç±»å‹ã€‚å®é™…å·¥ä½œåœºæ™¯åº”å½“æ˜¯æ”¯æŒæ³›å‹çš„
// æœ¬æ–‡ç¤ºä¾‹ä¸ºäº†ç®€å•ï¼Œä»¥Intç±»å‹
class BinarySearchTree {
    private var size: Int = 0
    private var root: Node? = nil
    
    func getSize() -> Int {
        return self.size
    }
    
    func isEmpty() -> Bool {
        return self.size == 0
    }
    
    func clear() {
        self.root = nil
        self.size = 0
    }
    
    func add(element: Int) {
        // æ·»åŠ çš„æ˜¯æ ¹èŠ‚ç‚¹
        if self.root == nil {
            self.root = BinarySearchTree.Node(element: element, parent: nil)
            self.size = self.size + 1
            return
        }
        // ä½¿ç”¨ä¸´æ—¶å˜é‡ä¿å­˜è¦æ·»åŠ çš„çˆ¶èŠ‚ç‚¹
        var tmpParent: Node? = nil
        // æ‰¾åˆ°çˆ¶èŠ‚ç‚¹
        var node = root
        while node != nil {
            // å°†å½“å‰éå†çš„èŠ‚ç‚¹èµ‹å€¼ç»™tmpParent
            tmpParent = node
            // æ¯”è¾ƒæ–°æ·»åŠ çš„å…ƒç´ æ˜¯å¦ å¤§äº æ ¹èŠ‚ç‚¹çš„å€¼
            if element > node!.element {
                node = node!.right
            }
            else if element < node!.element { // å°äº
                node = node!.left
            }
            else { // ç›¸ç­‰
                return
            }
        }
        
        let newNode = BinarySearchTree.Node(element: element, parent: tmpParent);
        if element > tmpParent!.element {
            tmpParent?.right = newNode
        }
        else {
            tmpParent?.left = newNode
        }
        self.size = self.size + 1
    }
    
    /// åˆ é™¤èŠ‚ç‚¹å€¼
    /// - Parameter element: èŠ‚ç‚¹å€¼
    func remove(element: Int) {
        var node = self.node(element: element)
        removeNode(node: &node);
    }
    
    func contains(element: Int) -> Bool {
        return false
    }
    
    /// åˆ é™¤èŠ‚ç‚¹
    /// - Parameter node: èŠ‚ç‚¹
    private func removeNode(node: inout Node?) {
        if node == nil {
            return
        }
        
        self.size = self.size - 1
        
        if node?.left != nil && node?.right != nil { // åº¦ä¸º2çš„èŠ‚ç‚¹
            // æ‰¾åˆ°åç»§èŠ‚ç‚¹
            let s = self.successor(node: &node)
            // ç”¨åç»§èŠ‚ç‚¹çš„å€¼è¦†ç›–åº¦ä¸º2çš„èŠ‚ç‚¹çš„å€¼
            node?.element = s!.element
            // åˆ é™¤åç»§èŠ‚ç‚¹
            node = s
        }
        
        // åˆ é™¤nodeèŠ‚ç‚¹(nodeçš„åº¦å¿…ç„¶æ˜¯1æˆ–è€…0)
        let replacement = node?.left != nil ? node?.left : node?.right
        if replacement != nil { // nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹
            replacement?.parent = node?.parent // æ›´æ”¹parent
            // æ›´æ”¹parentçš„leftã€rightçš„æŒ‡å‘
            if node?.parent == nil { // nodeæ˜¯åº¦ä¸º1çš„èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹
                root = replacement
            }
            else if node == node?.parent?.left {
                node?.parent?.left = replacement
            }
            else {
                node?.parent?.right = replacement
            }
        }
        else if node?.parent == nil { // nodeæ˜¯å¶å­èŠ‚ç‚¹å¹¶ä¸”æ˜¯æ ¹èŠ‚ç‚¹
            root = nil
        }
        else { // nodeæ˜¯å¶å­èŠ‚ç‚¹ï¼Œä½†ä¸æ˜¯æ ¹èŠ‚ç‚¹
            if node == node?.parent?.left {
                node?.parent?.left = nil
            }
            else { // node == node.parent.right
                node?.parent?.right = nil
            }
        }
    }
    
    
    /// åç»§èŠ‚ç‚¹
    /// - Parameter node: è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹
    private func successor(node: inout Node?) -> Node? {
        if node == nil {
            return nil
        }
        
        // å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­ï¼ˆright.left.left.left....ï¼‰
        var p = node?.right
        if (p != nil) {
            while (p!.left != nil) {
                p = p!.left;
            }
            return p;
        }
        
        // ä»çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ä¸­å¯»æ‰¾å‰é©±èŠ‚ç‚¹
        while (node!.parent != nil && node == node!.parent!.right) {
            node = node!.parent;
        }

        return node!.parent;
    }
    
    /// æ ¹æ®èŠ‚ç‚¹å€¼æŸ¥æ‰¾node
    /// - Parameter element: èŠ‚ç‚¹å€¼
    private func node(element: Int) -> Node? {
        var node = root
        while node != nil {
            if element == node!.element {
                return node
            }
            if element > node!.element {
                node = node?.right
            }
            else {
                node = node?.left
            }
        }
        
        return nil
    }
        
    class Node: Equatable {
        static func == (lhs: BinarySearchTree.Node, rhs: BinarySearchTree.Node) -> Bool {
            return lhs.element == rhs.element
        }
        
        var element: Int
        // å·¦å­èŠ‚ç‚¹
        var left: Node? = nil
        // å³å­èŠ‚ç‚¹
        var right: Node? = nil
        // çˆ¶å­èŠ‚ç‚¹
        var parent: Node?
        
        init(element: Int, parent: Node?) {
            self.element = element
            self.parent = parent
        }
    }
    
    // å‰åºéå†
    func preOrderTraversal() {
        self._preOrderTraversal(node: self.root)
    }
    
    // ä¸­åºéå†
    func preInOrderTraversal() {
        self._preInOrderTraversal(node: self.root)
    }
    
    // ååºéå†
    func postOrderTraversal() {
        self._postOrderTraversal(node: self.root)
    }
    
    // å±‚åºéå†
    func levelOrderTraversal() {
        self._levelOrderTraversal(node: self.root)
    }
    
    // è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
    func getTreeHeight() -> Int {
        return _getTreeHeight(node: self.root)
    }
    
    // è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
    func getTreeHeight_Order() -> Int {
        if self.root == nil {
            return 0
        }
        
        // å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(ä½¿ç”¨çš„æ˜¯ä¹‹å‰æ•°æ®ç»“æ„åˆ›å»ºçš„Queue)
        let queue = Queue<Node?>()
        // å°†æ ‘çš„æ ¹èŠ‚ç‚¹å…¥é˜Ÿ
        queue.enQueue(element: self.root)
        // æ ‘çš„æ€»é«˜åº¦
        var height = 0
        // å½“å‰è¿™ä¸€å±‚èŠ‚ç‚¹çš„ä¸ªæ•°(åˆå§‹åŒ–ä¸º1:æ ¹èŠ‚ç‚¹çš„é«˜åº¦)
        var levelSize = queue.size
        
        while !queue.isEmpty() {
            let node = queue.deQueue() // å‡ºé˜Ÿ
            levelSize = levelSize - 1 // å½“å‰è¿™ä¸€å±‚æœªè®¿é—®èŠ‚ç‚¹çš„ä¸ªæ•°-1
            
            if node?.left != nil {
                queue.enQueue(element: node?.left)
            }
            if node?.right != nil {
                queue.enQueue(element: node?.right)
            }
            
            if levelSize == 0 { // å‡åˆ°0äº†ï¼Œè¯´æ˜å³å°†è¦è®¿é—®ä¸‹ä¸€å±‚
                levelSize = queue.size // è¿™æ—¶å€™é˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯ä¸‹ä¸€å…¨éƒ¨å­èŠ‚ç‚¹
                height = height + 1 // æ€»é«˜åº¦+1
            }
        }
        
        return height
    }
    
    // åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘
    func isCompleteTree() -> Bool {
        if self.root == nil {
            return false
        }
        
        // å£°æ˜é˜Ÿåˆ—
        let queue = Queue<Node?>();
        // å°†æ ‘çš„æ ¹èŠ‚ç‚¹å…¥é˜Ÿ
        queue.enQueue(element: self.root)
        
        var leaf = false
        while !queue.isEmpty() {
            // å‡ºé˜Ÿ
            let node = queue.deQueue();
            // æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹(èŠ‚ç‚¹çš„å·¦å³éƒ½ä¸ºç©º)
            let isLeaf = node?.left == nil && node?.right == nil
            if leaf && !isLeaf {
                return false
            }
            
            if node?.left != nil && node?.right != nil {
                // å·¦å³èŠ‚ç‚¹éƒ½æœ‰å€¼(å…¥é˜Ÿ)
                queue.enQueue(element: node?.left)
                queue.enQueue(element: node?.right)
            }
            else if (node?.left == nil && node?.right != nil) {
                // å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œå³èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œç›´æ¥åˆ¤å®šæ˜¯éå®Œå…¨äºŒå‰æ ‘
                return false
            }
            else { // åé¢éå†çš„èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å¶å­èŠ‚ç‚¹
                leaf = true
            }
        }
        
        return true
    }
    
    // äºŒå‰æ ‘ç¿»è½¬(ä¸­åºéå†)
    func invertTree(root: Node?) -> Node? {
        if root == nil {
            return root
        }
        
        let queue = Queue<Node?>()
        queue.enQueue(element: self.root)
        
        while !queue.isEmpty() {
            let node = queue.deQueue()
            
            let tmp = root?.left
            root?.left = root?.right
            root?.right = tmp
            
            if node?.left != nil {
                queue.enQueue(element: node?.left)
            }
            
            if node?.right != nil {
                queue.enQueue(element: node?.right)
            }
        }
        return root
    }
    
    //----ç§æœ‰å®ç°æ–¹æ³•----å‰åºéå†
    private func _preOrderTraversal(node: Node?) {
        if node == nil {
            return
        }
        print("èŠ‚ç‚¹ä¸ºï¼š\(node?.element ?? -1)")
        _preOrderTraversal(node: node?.left)
        _preOrderTraversal(node: node?.right)
    }
    
    //----ç§æœ‰å®ç°æ–¹æ³•----ä¸­åºéå†
    private func _preInOrderTraversal(node: Node?) {
        if node == nil {
            return
        }
        
        _preInOrderTraversal(node: node?.left)
        print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
        _preInOrderTraversal(node: node?.right)
    }
    
    //----ç§æœ‰å®ç°æ–¹æ³•----ååºéå†
    private func _postOrderTraversal(node: Node?) {
        if node == nil {
            return
        }
        
        _postOrderTraversal(node: node?.left)
        _postOrderTraversal(node: node?.right)
        print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
    }

    //----ç§æœ‰å®ç°æ–¹æ³•----å±‚åºéå†
    private func _levelOrderTraversal(node: Node?) {
        if root == nil {
            return
        }
        
        let queue = Queue<Node?>()
        queue.enQueue(element: root)
        
        while !queue.isEmpty() {
            let node = queue.deQueue()
            print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
            
            if node?.left != nil {
                queue.enQueue(element: node?.left)
            }
            if node?.right != nil {
                queue.enQueue(element: node?.right)
            }
        }
    }
    
    //----ç§æœ‰å®ç°æ–¹æ³•----è·å–äºŒå‰æ ‘çš„é«˜åº¦
    private func _getTreeHeight(node: Node?) -> Int {
        if node == nil {
            return 0
        }
        let leftHeight = _getTreeHeight(node: node?.left)
        let rightHeight = _getTreeHeight(node: node?.right)
        return 1 + (leftHeight >= rightHeight ? leftHeight : rightHeight)
    }
}
```
æµ‹è¯•ä»£ç ï¼š
```swift

let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 9)
bst.add(element: 2)
bst.add(element: 5)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 3)

print(bst.getSize())
```

## äºŒå‰æ ‘çš„éå†
*éå†æ˜¯æ•°æ®ç»“æ„ä¸­çš„å¸¸è§æ“ä½œï¼Œä¸€èˆ¬æ˜¯æŒ‡å°†æ‰€æœ‰å…ƒç´ éƒ½è®¿é—®ä¸€éçš„æ“ä½œ*<br>
çº¿æ€§æ•°æ®ç»“æ„çš„éå†æ¯”è¾ƒç®€å•<br>
1.æ­£åºéå†<br>
2.é€†åºéå†<br>
<br>
ä½†æ ¹æ®èŠ‚ç‚¹è®¿é—®é¡ºåºçš„ä¸åŒï¼ŒäºŒå‰æ ‘çš„å¸¸è§éå†æ–¹å¼æœ‰4ç§<br>
1.`å‰åºéå†`(Preorder Traversal)<br>
2.`ä¸­åºéå†`(Inorder Traversal)<br>
3.`åç»­éå†`(Postorder Traversal)<br>
4.`å±‚åºéå†`(Level Order Traversal)<br>

#### å‰åºéå†
`å‰åºéå†`æŒ‡çš„æ˜¯å…ˆè®¿é—®`æ ¹èŠ‚ç‚¹`, å†å‰åºéå†`å·¦`å­æ ‘ï¼Œå‰åºéå†`å³`å­æ ‘
<img width="70%" height="70%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305131453WX20200305-211435@2x.png" referrerpolicy="no-referrer">
å®ç°ä»£ç ï¼š
```swift
// å‰åºéå†
func preOrderTraversal() {
    self._preOrderTraversal(node: self.root)
}

private func _preOrderTraversal(node: Node?) {
    if node == nil {
        return
    }
    print("èŠ‚ç‚¹ä¸ºï¼š\(node?.element ?? -1)")
    _preOrderTraversal(node: node?.left)
    _preOrderTraversal(node: node?.right)
}
```
æµ‹è¯•ä»£ç ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)

// å‰åºéå†
bst.preOrderTraversal()
// -------
// æ§åˆ¶å°è¾“å‡ºï¼š7ã€4ã€2ã€1ã€3ã€5ã€9ã€8ã€11ã€12
```

#### ä¸­åºéå†
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305134835WX20200305-214821@2x.png" referrerpolicy="no-referrer">
å®ç°ä»£ç ï¼š
```swift
// ä¸­åºéå†
func preInOrderTraversal() {
    self._preInOrderTraversal(node: self.root)
}
//----ç§æœ‰å®ç°æ–¹æ³•----ä¸­åºéå†
private func _preInOrderTraversal(node: Node?) {
    if node == nil {
        return
    }
    
    _preInOrderTraversal(node: node?.left)
    print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
    _preInOrderTraversal(node: node?.right)
}
```
æµ‹è¯•ä»£ç ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)

// ä¸­åºéå†
bst.preInOrderTraversal()
// è¾“å‡º1ã€2ã€3ã€4ã€5ã€7ã€8ã€9ã€11ã€12
```

#### ååºéå†
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200305140414WX20200305-220356@2x.png" referrerpolicy="no-referrer">
å®ç°ä»£ç ï¼š
```swift
// ååºéå†
func postOrderTraversal() {
    self._postOrderTraversal(node: self.root)
}
//----ç§æœ‰å®ç°æ–¹æ³•----ååºéå†
private func _postOrderTraversal(node: Node?) {
    if node == nil {
        return
    }
    
    _postOrderTraversal(node: node?.left)
    _postOrderTraversal(node: node?.right)
    print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
}
```
æµ‹è¯•ä»£ç ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)

// ååºéå†
bst.postOrderTraversal()
// è¾“å‡º1ã€3ã€2ã€5ã€4ã€8ã€12ã€11ã€9ã€7
```

#### å±‚åºéå†
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200306012644WX20200306-092530@2x.png" referrerpolicy="no-referrer">
å¯¹äº`å±‚åºéå†`æ¥è¯´ï¼Œç”±äºéå†çš„é¡ºåºæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ä¾æ¬¡éå†ï¼Œé€’å½’æ“ä½œæ˜¯æ— æ³•æ»¡è¶³è¦æ±‚çš„ï¼Œæ­¤æ—¶å¯é€‰æ‹©ä½¿ç”¨`é˜Ÿåˆ—`æ¥å®ç°ï¼š<br>

- å°†æ ¹èŠ‚ç‚¹å…¥é˜Ÿ
- å¾ªç¯æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼ŒçŸ¥é“é˜Ÿåˆ—ä¸ºç©º
    - å°†é˜Ÿåˆ—å¤´èŠ‚ç‚¹`A`å‡ºé˜Ÿï¼Œè¿›è¡Œ`è®¿é—®`
    - å°†`A`çš„å·¦å­èŠ‚ç‚¹å…¥é˜Ÿ
    - å°†`A`çš„å³å­èŠ‚ç‚¹å…¥é˜Ÿ

å®ç°ä»£ç ï¼š
```swift
// å±‚åºéå†
func levelOrderTraversal() {
    self._levelOrderTraversal(node: self.root)
}
//----ç§æœ‰å®ç°æ–¹æ³•----å±‚åºéå†
private func _levelOrderTraversal(node: Node?) {
    if root == nil {
        return
    }
    // è¿™é‡Œçš„é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯å‰é¢æ–‡ç« æ‰€å®ç°çš„é˜Ÿåˆ—
    let queue = Queue<Node?>()
    queue.enQueue(element: root)
    
    while !queue.isEmpty() {
        let node = queue.deQueue()
        print("èŠ‚ç‚¹ä¸º\(node?.element ?? -1)")
        
        if node?.left != nil {
            queue.enQueue(element: node?.left)
        }
        if node?.right != nil {
            queue.enQueue(element: node?.right)
        }
    }
}
```
ä»£ç æµ‹è¯•ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)

// å±‚åºéå†
bst.levelOrderTraversal()
// è¾“å‡º7ã€4ã€9ã€2ã€5ã€8ã€11ã€1ã€3ã€12
```

## ç®—æ³•ç»ƒä¹ 

#### è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
**é¢˜ç›®**ï¼šç»™å‡ºä¸€ä¸ªäºŒå‰æ ‘ï¼Œè®¡ç®—å‡ºæ¥å®ƒçš„é«˜åº¦<br>
<br>
**é¢˜è§£**ï¼š<br>
è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ç®—å‡ºæ ¹èŠ‚ç‚¹åˆ°æ‰€æœ‰å¶å­èŠ‚ç‚¹çš„æœ€è¿œè·ç¦», å¯ä»¥ä½¿ç”¨`é€’å½’`å’Œ`è¿­ä»£`è®¡ç®—<br>

**`é€’å½’æ³•`**:<br>
```swift
// è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
func getTreeHeight() -> Int {
    return _getTreeHeight(node: self.root)
}
//----ç§æœ‰å®ç°æ–¹æ³•----è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
private func _getTreeHeight(node: Node?) -> Int {
    if node == nil {
        return 0
    }
    let leftHeight = _getTreeHeight(node: node?.left)
    let rightHeight = _getTreeHeight(node: node?.right)
    return 1 + (leftHeight >= rightHeight ? leftHeight : rightHeight)
}
```
ä»£ç æµ‹è¯•ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)

print("äºŒå‰æ ‘çš„é«˜åº¦ï¼š\(bst.getTreeHeight())") // è¾“å‡º4
```

**`è¿­ä»£æ³•`**:<br>
```swift
// è®¡ç®—äºŒå‰æ ‘çš„é«˜åº¦
func getTreeHeight_Order() -> Int {
    if self.root == nil {
        return 0
    }
    
    // å£°æ˜ä¸€ä¸ªé˜Ÿåˆ—(ä½¿ç”¨çš„æ˜¯ä¹‹å‰æ•°æ®ç»“æ„åˆ›å»ºçš„Queue)
    let queue = Queue<Node?>()
    // å°†æ ‘çš„æ ¹èŠ‚ç‚¹å…¥é˜Ÿ
    queue.enQueue(element: self.root)
    // æ ‘çš„æ€»é«˜åº¦
    var height = 0
    // å½“å‰è¿™ä¸€å±‚èŠ‚ç‚¹çš„ä¸ªæ•°(åˆå§‹åŒ–ä¸º1:æ ¹èŠ‚ç‚¹çš„é«˜åº¦)
    var levelSize = queue.size
    
    while !queue.isEmpty() {
        let node = queue.deQueue() // å‡ºé˜Ÿ
        levelSize = levelSize - 1 // å½“å‰è¿™ä¸€å±‚æœªè®¿é—®èŠ‚ç‚¹çš„ä¸ªæ•°-1
        
        // åˆ¤æ–­èŠ‚ç‚¹çš„å·¦å³èŠ‚ç‚¹ï¼Œå¦‚æœä¸ä¸ºç©ºï¼Œå°±å°†èŠ‚ç‚¹æ·»åŠ åˆ°é˜Ÿåˆ—å°¾ç«¯
        if node?.left != nil {
            queue.enQueue(element: node?.left)
        }
        if node?.right != nil {
            queue.enQueue(element: node?.right)
        }
        
        if levelSize == 0 { // å‡åˆ°0äº†ï¼Œè¯´æ˜å³å°†è¦è®¿é—®ä¸‹ä¸€å±‚
            levelSize = queue.size // è¿™æ—¶å€™é˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯ä¸‹ä¸€å…¨éƒ¨å­èŠ‚ç‚¹
            height = height + 1 // æ€»é«˜åº¦+1
        }
    }
    
    return height
}
```

> æ„Ÿè§‰é˜Ÿåˆ—æ˜¯ä¸€ç§å¾®å¦™çš„æ•°æ®ç»“æ„ï¼Œæœ‰æ—¶å€™ç”¨æ¥è§£å†³ä¸€äº›é—®é¢˜è¿˜æ˜¯éå¸¸æœ‰ç”¨å¤„çš„

#### åˆ¤æ–­ä¸€æ£µæ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘
**é¢˜ç›®**ï¼šåˆ¤æ–­ä¸€æ£µæ ‘æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘<br>
`å®Œå…¨äºŒå‰æ ‘`ï¼šæ˜¯`ä»ä¸Šåˆ°ä¸‹`ã€`ä»å·¦åˆ°å³`ä¾æ¬¡æ’åˆ—è¿™ä¸€æ£µæ ‘ï¼Œ`å¶å­èŠ‚ç‚¹`åªä¼šå‡ºç°çš„`æœ€åä¸¤å±‚`ï¼Œä¸”`æœ€åä¸€å±‚`çš„`å¶å­èŠ‚ç‚¹`éƒ½`é å·¦`å¯¹é½<br>
<br>
**é¢˜è§£**ï¼š<br>
å› ä¸º`å®Œå…¨äºŒå‰æ ‘`çš„ç‰¹ç‚¹(ä»ä¸Šåˆ°ä¸‹ã€ä»å·¦åˆ°å³ä¾æ¬¡æ’åˆ—ï¼Œå¶å­èŠ‚ç‚¹é å·¦å¯¹é½), åˆ©ç”¨`å±‚åºéå†æ³•`æ¥å®ç°æ˜¯æ¯”è¾ƒç®€å•çš„<br>
```swift
// åˆ¤æ–­äºŒå‰æ ‘æ˜¯å¦æ˜¯å®Œå…¨äºŒå‰æ ‘
func isCompleteTree() -> Bool {
    if self.root == nil {
        return false
    }
    
    // å£°æ˜é˜Ÿåˆ—
    let queue = Queue<Node?>();
    // å°†æ ‘çš„æ ¹èŠ‚ç‚¹å…¥é˜Ÿ
    queue.enQueue(element: self.root)
    
    var leaf = false
    while !queue.isEmpty() {
        // å‡ºé˜Ÿ
        let node = queue.deQueue();
        // æ˜¯å¦æ˜¯å¶å­èŠ‚ç‚¹(èŠ‚ç‚¹çš„å·¦å³éƒ½ä¸ºç©º)
        let isLeaf = node?.left == nil && node?.right == nil
        if leaf && !isLeaf {
            return false
        }
        
        if node?.left != nil && node?.right != nil {
            // å·¦å³èŠ‚ç‚¹éƒ½æœ‰å€¼(å…¥é˜Ÿ)
            queue.enQueue(element: node?.left)
            queue.enQueue(element: node?.right)
        }
        else if (node?.left == nil && node?.right != nil) {
            // å·¦èŠ‚ç‚¹ä¸ºç©ºï¼Œå³èŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œç›´æ¥åˆ¤å®šæ˜¯éå®Œå…¨äºŒå‰æ ‘
            return false
        }
        else { // åé¢éå†çš„èŠ‚ç‚¹éƒ½å¿…é¡»æ˜¯å¶å­èŠ‚ç‚¹
            leaf = true
        }
    }
    return true
}
```
ä»£ç æµ‹è¯•ï¼š
```swift
let bst = BinarySearchTree();
bst.add(element: 7)
bst.add(element: 4)
bst.add(element: 2)
bst.add(element: 9)
bst.add(element: 5)
bst.add(element: 1)
bst.add(element: 8)
bst.add(element: 11)
bst.add(element: 12)
bst.add(element: 3)
print("å®Œå…¨äºŒå‰æ ‘ï¼š\(bst.isCompleteTree())") // false


let bst1 = BinarySearchTree();
bst1.add(element: 7)
bst1.add(element: 4)
bst1.add(element: 9)
bst1.add(element: 2)
bst1.add(element: 2)
print("å®Œå…¨äºŒå‰æ ‘ï¼š\(bst1.isCompleteTree())") // true
```

#### ç¿»è½¬äºŒå‰æ ‘
<img width="70%" height="70%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200306061753WX20200306-141734@2x.png" referrerpolicy="no-referrer">

> è¿™é“é¢˜æ˜¯`Homebrew`çš„ä½œè€…`Max Howell`å»è°·æ­Œé¢è¯•æ—¶ï¼Œè¢«é—®åˆ°çš„ä¸€ä¸ªé—®é¢˜ï¼Œç»“æœä½œè€…éƒ½æ²¡èƒ½åœ¨ç™½æ¿ä¸Šå†™å‡ºç­”æ¡ˆğŸ˜‚<br>
> Google:90% of our engineers use the software you wrote(Homebrew), but you can't invert a binary tree on a whiteboard so fuck off.

**é¢˜è§£**:<br>
ç¿»è½¬å…¶å®æ˜¯å°†`æ‰€æœ‰èŠ‚ç‚¹`çš„`å·¦å³å­æ ‘`è¿›è¡Œ`äº¤æ¢`, å…¶å®å¦‚æœä¼šéå†äºŒå‰æ ‘ï¼Œé‚£ä¹ˆè¿™é“é¢˜å°±å¾ˆå¥½åšäº†<br>
*`å‰åºéå†ç¿»è½¬æ³•`*:<br>

```swift
// äºŒå‰æ ‘ç¿»è½¬(å‰åºéå†)
func invertTree(root: Node?) -> Node? {
    if root == nil {
        return root
    }
    
    let tmp = root?.left
    root?.left = root?.right
    root?.right = tmp
    
    invertTree(root: root?.left)
    invertTree(root: root?.right)
    
    return root
}
```

*`ä¸­åºéå†ç¿»è½¬æ³•`*:<br>

```swift
// äºŒå‰æ ‘ç¿»è½¬(ä¸­åºéå†)
func invertTree(root: Node?) -> Node? {
    if root == nil {
        return root
    }
    
    invertTree(root: root?.left)
    
    let tmp = root?.left
    root?.left = root?.right
    root?.right = tmp
    
    invertTree(root: root?.left) // è¿™é‡Œè¦æ³¨æ„ï¼šå¿…é¡»è¦leftï¼Œå› ä¸ºrightå·²ç»äº¤æ¢è¿‡äº†
    
    return root
}
```

*`å±‚åºéå†ç¿»è½¬æ³•`*:<br>
```swift
// äºŒå‰æ ‘ç¿»è½¬(å±‚åºéå†)
func invertTree(root: Node?) -> Node? {
    if root == nil {
        return root
    }
    
    let queue = Queue<Node?>()
    queue.enQueue(element: self.root)
    
    while !queue.isEmpty() {
        let node = queue.deQueue()
        
        let tmp = node?.left
        node?.left = node?.right
        node?.right = tmp
        
        if node?.left != nil {
            queue.enQueue(element: node?.left)
        }
        
        if node?.right != nil {
            queue.enQueue(element: node?.right)
        }
    }
    return root
}
```

#### å‰é©±èŠ‚ç‚¹
`å‰é©±èŠ‚ç‚¹`: ä¸­åºéå†æ—¶çš„å‰ä¸€ä¸ªèŠ‚ç‚¹(å¦‚æœæ˜¯æœç´¢äºŒå‰æ ‘ï¼Œé‚£ä¹ˆå‰é©±èŠ‚ç‚¹å°±æ˜¯å‰ä¸€ä¸ªæ¯”å®ƒå°çš„èŠ‚ç‚¹)
<img height="100%" src="https://images.cnblogs.com/cnblogs_com/plusone/1527513/o_200314084047WX20200314-163942@2x.png" referrerpolicy="no-referrer">

```swift
func predecessor(node: inout Node?) -> Node? {
    if node == nil {
        return nil
    }
    
    // å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­(left.right.right.right...)
    var p = node?.left;
    if p != nil {
        while p?.right != nil {
            p = p?.right
        }
        return p
    }
    
    // ä»çˆ¶èŠ‚ç‚¹å¼€å§‹å¯»æ‰¾ å‰é©±èŠ‚ç‚¹
    while node?.parent != nil && node?.parent?.left == node {
        node = node?.parent
    }
    
    return node?.parent
}
```

#### åç»§èŠ‚ç‚¹
`åç»§èŠ‚ç‚¹`å’Œå‰é©±èŠ‚ç‚¹æ˜¯åç€çš„ï¼Œå³:ä¸­åºéå†æ—¶çš„åä¸€ä¸ªèŠ‚ç‚¹(å¦‚æœæ˜¯æœç´¢äºŒå‰æ ‘ï¼Œé‚£ä¹ˆåç»§èŠ‚ç‚¹å°±æ˜¯åä¸€ä¸ªæ¯”ä»–å¤§çš„èŠ‚ç‚¹)

```swift
/// åç»§èŠ‚ç‚¹
/// - Parameter node: è¦æŸ¥æ‰¾çš„èŠ‚ç‚¹
private func successor(node: inout Node?) -> Node? {
    if node == nil {
        return nil
    }
    
    // å‰é©±èŠ‚ç‚¹åœ¨å·¦å­æ ‘å½“ä¸­ï¼ˆright.left.left.left....ï¼‰
    var p = node?.right
    if (p != nil) {
        while (p!.left != nil) {
            p = p!.left;
        }
        return p;
    }
    
    // ä»çˆ¶èŠ‚ç‚¹ã€ç¥–çˆ¶èŠ‚ç‚¹ä¸­å¯»æ‰¾å‰é©±èŠ‚ç‚¹
    while (node!.parent != nil && node == node!.parent!.right) {
        node = node!.parent;
    }

    return node!.parent;
}
```


> æœ¬æ–‡é¦–æ¬¡å‘å¸ƒäº [å­™å¿ è‰¯ Blog](https://sunzhongliangde.github.io), ä½œè€… [@sunzhongliang] ,
è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥.
